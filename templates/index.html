{% extends "base.html" %}

{% block title %}{{ context }}{% endblock %}

{% block content %}
  <h2>{{ context}}</h2>

  <p>
    {% if context == "Databases" %}
      Database: none selected.
    {% elif context == "Tables" %}
      Database: {{ current_database if current_database else 'none' }}.
    {% elif context == "Columns" %}
      <pre>
      Database: {{ current_database if current_database else 'none' }}
      Table   : {{ current_table if current_table else 'none' }}
      </pre>
    {% elif context == "Rows" %}
      <pre>
      Database: {{ current_database if current_database else 'none' }}
      Table   : {{ current_table if current_table else 'none' }}
      </pre>
    {% endif %}
  </p>

  {% if context == "Databases" %}
    <form action="/databases" method="post">
  {% elif context == "Tables" %}
    <form action="/tables" method="post">
  {% elif context == "Columns" %}
    <form action="/columns" method="post">
  {% elif context == "Fields" %}
    <form action="/fields" method="post">
  {% else %}
    <form hx-post="/add" hx-target="#details" hx-swap="innerHTML" method="post">
  {% endif %}
    
    <input name="name" placeholder="Enter a name" required>
    <button type="submit">Add</button>
  </form>

  {% if context in ["Databases", "Tables", "Columns", "Rows"] %}
  <table>
    <thead>
      <tr>
        <th>{{ context[:-1] }}</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody id="details">
      {% include "_rows.html" %}
    </tbody>
  </table>
{% endif %}
{% endblock %}
